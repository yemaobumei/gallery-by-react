(function($){var defaults={"container":"#container","page":".page","easing":"ease","duration":1000,"pagination":true,"loop":false,"keyboard":true,"direction":"vertical","onpageSwitch":function(pagenum){}};var win=$(window),$container,$pages,$win_height;var opts={},canScroll=true;var count=0;var pageArray=[];var speed;var isFinished=true;var SP=$.fn.switchPage=function(options){opts=$.extend({},defaults,options||{});$container=$(opts.container);$pages=$container.find(opts.page);return this.each(function(index,el){initPagination();mouseWheel();keyDown()})};function initPagination(){$win_height=win.height();$pages.height($win_height);$pages.each(function(index,el){pageArray.push($(this).position().top)});speed=Math.floor($(".page").height()/100);if(!+[1,]){speed=Math.floor($(".page").height()/30)}$container.css("overflow-y","hidden");scrollPage(0,-speed);var $controllerNav=$("<nav class='controller-nav'></nav>");$controllerNav.appendTo($container);var $p=$("<p class='pagination'><span class='count'>"+(count+1)+"</span>/"+pageArray.length+"é¡µ</p>");$p.appendTo($controllerNav);var span="";for(var i=0;i<pageArray.length;i++){span+="<span class='controller-unit'></span>"}var $controllerUnit=$(span);$controllerUnit.appendTo($controllerNav);$(".controller-unit").eq(0).addClass("controller-unit-hover")}function scrollPage(destination,speed){isFinished=false;var timer=setTimeout(function(){var osTop=document.documentElement.scrollTop||document.body.scrollTop;if(Math.abs(osTop-destination)>Math.abs(speed)){speed=speed+speed*0.01;document.documentElement.scrollTop=document.body.scrollTop=osTop+speed;setTimeout(arguments.callee,3)}else{document.documentElement.scrollTop=document.body.scrollTop=destination;isFinished=true}},10)}function pageChange(){$(".count").html(count+1);$(".controller-unit").removeClass("controller-unit-hover");$(".controller-unit").eq(count).addClass("controller-unit-hover")}function mouseWheel(){var MouseWheelHandler=function(e){e.preventDefault();var value=e.originalEvent.wheelDelta||-e.originalEvent.detail;var move=1;var delta=value;if(delta<-move&&isFinished){moveDown()}else{if(delta>move&&isFinished){moveUp()}}};$(document).on("mousewheel DOMMouseScroll",MouseWheelHandler)}function moveDown(){count+=1;if(count>=pageArray.length){count=0;document.documentElement.scrollTop=document.body.scrollTop=0;$(".count").html(count+1)}else{scrollPage(pageArray[count],speed)}pageChange();return false}function moveUp(){count-=1;if(count<0){count=pageArray.length-1;document.documentElement.scrollTop=document.body.scrollTop=pageArray[count];$(".count").html(count+1)}else{scrollPage(pageArray[count],-speed)}pageChange();return false}function keyDown(){var keydownId;win.keydown(function(e){clearTimeout(keydownId);keydownId=setTimeout(function(){var keyCode=e.keyCode;if(keyCode==37||keyCode==38){moveUp()}else{if(keyCode==39||keyCode==40){moveDown()}}},100)})}function touchmove(){}})(jQuery);